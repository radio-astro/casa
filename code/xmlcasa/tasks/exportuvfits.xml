<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="exportuvfits" async="true">
<shortdescription>Convert a CASA visibility data set to a UVFITS file:</shortdescription>
<description>
</description>
<input>
	<param type="string" name="vis" mustexist="true">
		<description>Name of input visibility file</description>
		<value></value>
	</param>

	<param type="string" name="fitsfile">
		<description>Name of output UV FITS file</description>
		<value></value>
	</param>

	<param type="string" name="datacolumn">
		<description>Visibility file data column</description>
		<value>corrected</value>
		<allowed kind="enum">
			<value>data</value>
			<value>corrected</value>
			<value>model</value>
			<value>weight</value>
		</allowed>
	</param>

        <param type="any" name="field">
                <description>Select field using field id(s) or field name(s)</description>
		<any type="variant" limittypes="string stringArray int intArray"/>
                <value type="string"></value>
        </param>


	<param type="string" name="spw">
		<description>Select spectral window/channels</description>
		<value></value>
	</param>

	<param type="string" name="antenna" >
		<description>Select data based on antenna/baseline</description>
		<value></value>
	</param>

	<param type="string" name="timerange" >
		<description>Select data based on time range</description>
		<value></value>
	</param>

	<param type="int" name="nchan">
		<description>Number of channels to select (superceded by spw)</description>
		<value>-1</value>
	</param>

	<param type="int" name="start">
		<description>Start channel (superceded by spw)</description>
		<value>0</value>
	</param>

	<param type="int" name="width">
		<description>Channel averaging width (value > 1 indicates averaging)</description>
		<value>1</value>
	</param>

	<param type="bool" name="writesyscal">
		<description>Write GC and TY tables, (Not yet available)</description>
		<value>False</value>
	</param>

	<param type="bool" name="multisource">
		<description>Write in multi-source format</description>
		<value>True</value>
	</param>

	<param type="bool" name="combinespw">
		<description> Combine all spectral windows at one time</description>
		<value>True</value>
	</param>

	<param type="bool" name="writestation">
		<description>Write station name instead of antenna name</description>
		<value>True</value>
	</param>

</input>
<example>

        This task write a UVFITS file, a general format data set used
        to transfer data between different software systems.  It is
        written in floating point format.  Many spectral windows can
        be exported to UVFITS only if they have the same shape.  For
        transferral to the AIPS interferometric packages, multi-source
        and combinesp options should be set to true.

        Keyword arguments:
        vis -- Name of input visibility file
                default: none;  example: vis='ngc5921.ms'
        fitsfile -- Name of output UV FITS file
                default: none;  example='3C273XC1.fits'
        datacolumn -- Visibility file data column
                default: =&gt; 'corrected'; example: datacolumn='model'
                Options: 'data' (raw),'corrected','model','weight'
        field -- Select field using field id(s) or field name(s).
                  [run listobs to obtain the list id's or names]
               default: ''=all fields
               If field string is a non-negative integer, it is assumed a field index
               otherwise, it is assumed a field name
               field='0~2'; field ids 0,1,2
               field='0,4,5~7'; field ids 0,4,5,6,7
               field='3C286,3C295'; field named 3C286 adn 3C295
               field = '3,4C*'; field id 3, all names starting with 4C
       spw -- Select spectral window/channels 
                 type 'help par.selection' for more examples.
               spw='0~2,4'; spectral windows 0,1,2,4 (all channels)
               spw='&lt;2';  spectral windows less than 2 (i.e. 0,1)
               spw='0:5~61'; spw 0, channels 5 to 61, INCLUSIVE
               spw='*:5~61'; all spw with channels 5 to 62
               spw='0,10,3:3~45'; spw 0,10 all channels, spw 3, channels 3 to 45.
               spw='0~2:2~6'; spw 0,1,2 with channels 2 through 6 in each.
               spw='0:0~10;15~60'; spectral window 0 with channels 0-10,15-60
                         NOTE ';' to separate channel selections
               spw='0:0~10^2,1:20~30^5'; spw 0, channels 0,2,4,6,8,10,
                     spw 1, channels 20,25,30
        antenna -- Select data based on antenna/baseline
               default: '' (all)
               If antenna string is a non-negative integer, it is assumed
	          an antenna index
                 otherwise, it is assumed as an antenna name
               antenna='5&amp;6'; baseline between antenna index 5 and index 6.
               antenna='VA05&amp;VA06'; baseline between VLA antenna 5 and 6.
               antenna='5&amp;6;7&amp;8'; baseline 5-6 and 7-8
               antenna='5'; all baselines with antenna index 5
               antenna='05'; all baselines with antenna name '05', vla antenna
               antenna='5,6,10'; all baselines with antennas 5, 6 and 10
        timerange  -- Select data based on time range:
               default = '' (all); examples,
               timerange = 'YYYY/MM/DD/hh:mm:ss~YYYY/MM/DD/hh:mm:ss'
               Note: if YYYY/MM/DD is missing dat defaults to first day in data set
               timerange='09:14:0~09:54:0' picks 40 min on first day
               timerange='25:00:00~27:30:00' picks 1 hr to 3 hr 30min on next day
               timerange='09:44:00' data within one integration of time
               timerange='&gt;10:24:00' data after this time
        nchan -- Number of channels to select (superceded by spw)
                default: =&gt; -1 (all)
        start -- Start channel (superceded by spw)
                default =&gt; 0;
        width -- Channel averaging width (value &gt; 1 indicates averaging)
                default =&gt;1; example: width=3
                output data will average channels in groups of three.
        writesyscal -- Write GC and TY tables
                default: =&gt; False; Not yet available
        multisource -- Write in multi-source format
                default: =&gt; True;
                   false if one source is selected
        combinespw -- Combine all spectral windows at one time
                default: =&gt;  True;
                   all spectral windows must have same shape.
                   successful aips transferral must have default=True
        writestation -- Write station name instead of antenna name
                default: True;
        async --  Run asynchronously
                default = true; highly recommended.

</example> 

</task>
</casaxml>
