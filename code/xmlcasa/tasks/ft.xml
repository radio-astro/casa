<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
      file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="ft" category="imaging">
	<shortdescription>Insert a source model into the MODEL_DATA column of a visibility set:</shortdescription>
	<description>
       A source model (souce.model image) or components list is converted into a
       model visibility that is inserted into the MODEL_DATA column.  This is
       needed to use resolved source in gaincal and in fluxscale.  (Setjy will
       automatically make this ft step.)

       The sources currently available are 3C48, 3C138, 3C147, 3C286
       at 1.4, 5.0, 8.4, 15, 22, 43 GHz.  Their location is site
       dependent.  In Charlottesville and at the AOC, the models are
       in /usr/lib/casapy/data/nrao/VLA/CalModels.
	</description>
	<input>
		<param type="string" name="vis" mustexist="true">
			<description>Name of input visibility file (MS)</description>
			<value></value>
		</param>

		<param type="string" name="field">
			<description>Field selection</description>
			<value></value>
		</param>

		<param type="string" name="spw">
			<description>Spw selection</description>
			<value></value>
		</param>

		<param type="any" name="model">
			<description>Name of input model image(s)</description>
			<any type="variant"/>
			<value type="string"></value>
			<value></value>
		</param>

		<param type="int" name="nterms">
			<description>Number of terms used to model the sky frequency dependence</description>
			<value>1</value>
		</param>

		<param type="string" name="reffreq" subparam="true">
			<description>Reference frequency (e.g. \'1.5e+9\' or \'1.5GHz\')</description>
			<value></value>
		</param>

		<param type="string" name="complist">
			<description>Name of component list</description>
			<value></value>
		</param>

		<param type="bool" name="incremental">
			<description>Add to the existing MODEL_DATA column?</description>
			<value>False</value>
		</param>

		<constraints>
		        <when param="nterms">
			      <notequals type="int" value="1">
			           <default param="reffreq"><value type="string"></value></default>
			      </notequals>
			</when>
		</constraints>

	</input>
<returns type="void"/>

<example>

       A source model (souce.model image) or components list is converted into a
       model visibility that is inserted into the MODEL_DATA column.  This is
       needed to use resolved source in gaincal and in fluxscale.  

       Setjy will automatically make this ft step on the
       sources currently available are 3C48, 3C138, 3C147, 3C286
       at 1.4, 5.0, 8.4, 15, 22, 43 GHz.  Their location is site
       dependent.  In Charlottesville and at the AOC, the models are
       in /usr/lib(lib64)/casapy/data/nrao/VLA/CalModels.
               

       Keyword arguments:
       vis -- Name of input visibility file
              default: none; example: vis='ngc5921.ms'
       field -- Field name list
               default: '' ==> all
               NOTE: BUT, only one source can be specified in a multi-source vis.
               field = '1328+307'  specifies source '1328+307'
               field = '4' specified field with index 4
       spw -- Spw selection
               default: spw = '' (all spw)
       model -- Name of input model image
               default: '' ==> None;
               example: model='/usr/lib/casapy/data/nrao/VLA/CalModels/3C286_X.im'
               Note: The model visibilities are scaled from the model frequency
                     to the observed frequency of the data.
       nterms -- Number of terms used to model the sky frequency dependence
                 default: 1  ==> one model image is required
                 example : nterms=3  represents a 2nd order Taylor-polynomial in frequency
                           and should be used in conjuction with coefficient model images as 
		           model=['xxx.model.tt0','xxx.model.tt1', 'xxx.model.tt2']
             reffreq -- Reference-frequency about which this Taylor-expansion is defined.
	                default: '' ==> reads the reference frequency from the model image
                        example : reffreq = '1.5GHz'
       complist -- Name of component list
               default: None; ; example: complist='test.cl'
               component lists are difficult to make.
       incremental -- Add model visibility to the existing MODEL_DATA visibilties
               default: False; example: incremental=True



     



 </example>
 </task>
 </casaxml>
