<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd">

<task type="function" name="plotms" category="visualization, information,editing, manipulation, utility" async="never">
<shortdescription>A plotter/interactive flagger for visibility data.</shortdescription>

<returns type="void" />
	
<description>
            Task for plotting and interacting with visibility data.  A variety
        of axes choices (including data column) along with MS selection and
        averaging options are provided for data selection.  Flag extension
        parameters are also available for flagging operations in the plotter.
        
            All of the provided parameters can also be set using the GUI once
        the application has been launched.  Additional and more specific
        operations are available through the GUI and/or through the plotms
        tool (pm).
        
</description>

<input>

<!--
###############################################################################
MS Parameters
###############################################################################
-->
  <param type="string" name="vis" kind="ms">
    <description>input visibility dataset (blank for none)</description>
    <value />
  </param>

  <param type="string" name="xaxis">
    <description>plot x-axis (blank for default/current)</description>
    <value />
    <allowed kind="enum">
      <value />
      <value>scan</value>
      <value>field</value>
      <value>time</value>
      <value>interval</value><value>time_interval</value><value>timeinterval</value><value>timeint</value>
      <value>spw</value>
      <value>channel</value><value>chan</value>
      <value>frequency</value><value>freq</value>
      <value>correlation</value><value>corr</value>
      <value>antenna1</value><value>ant1</value>
      <value>antenna2</value><value>ant2</value>
      <value>baseline</value>
      <value>uvdist</value>
      <value>uvwave</value><value>uvdist_l</value><value>uvdistl</value>
      <value>u</value>
      <value>v</value>
      <value>w</value>
      <value>velocity</value><value>vel</value>
      <value>amp</value><value>amplitude</value>
      <value>phase</value>
      <value>real</value>
      <value>imag</value><value>imaginary</value>
      <value>wt</value><value>weight</value>
      <value>imwt</value>
      <value>flag</value>
      <value>azimuth</value>
      <value>elevation</value>
      <value>hourang</value><value>hourangle</value>
      <value>parang</value><value>parangle</value><value>parallacticangle</value>
      <value>antenna</value><value>ant</value>
      <value>ant-azimuth</value>
      <value>ant-elevation</value>
      <value>ant-parang</value><value>ant-parangle</value><value>ant-parallacticangle</value>
      <value>row</value>
      <value>flagrow</value>
    </allowed>
  </param>
  
    <param type="string" name="xdatacolumn" subparam="true">
      <description>data column to use for x-axis (blank for default/current)</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>data</value>
        <value>corrected</value>
        <value>model</value>
        <value>residual</value>
      </allowed>
    </param>    

  <param type="string" name="yaxis">    
  <description>plot y-axis (blank for default/current)</description>
    <value />
    <allowed kind="enum">
      <value />
      <value>scan</value>
      <value>field</value>
      <value>time</value>
      <value>interval</value><value>time_interval</value><value>timeinterval</value><value>timeint</value>
      <value>spw</value>
      <value>channel</value><value>chan</value>
      <value>frequency</value><value>freq</value>
      <value>correlation</value><value>corr</value>
      <value>antenna1</value><value>ant1</value>
      <value>antenna2</value><value>ant2</value>
      <value>baseline</value>
      <value>uvdist</value>
      <value>uvwave</value><value>uvdist_l</value><value>uvdistl</value>
      <value>u</value>
      <value>v</value>
      <value>w</value>
      <value>velocity</value><value>vel</value>
      <value>amp</value><value>amplitude</value>
      <value>phase</value>
      <value>real</value>
      <value>imag</value><value>imaginary</value>
      <value>wt</value><value>weight</value>
      <value>imwt</value>
      <value>flag</value>
      <value>azimuth</value>
      <value>elevation</value>
      <value>hourang</value><value>hourangle</value>
      <value>parang</value><value>parangle</value><value>parallacticangle</value>
      <value>antenna</value><value>ant</value>
      <value>ant-azimuth</value>
      <value>ant-elevation</value>
      <value>ant-hourang</value><value>ant-hourangle</value>
      <value>ant-parang</value><value>ant-parangle</value><value>ant-parallacticangle</value>
      <value>row</value>
      <value>flagrow</value>
    </allowed>  
    </param>
    
    <param type="string" name="ydatacolumn" subparam="true">
      <description>data column to use for y-axis (blank for default/current)</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>data</value>
        <value>corrected</value>
        <value>model</value>
        <value>residual</value>
      </allowed>
    </param>

<!--
###############################################################################
MS Selection parameters
###############################################################################
-->

  <param type="bool" name="selectdata">
    <description>data selection parameters</description>
    <value>True</value>
  </param>
  
    <param type="string" name="field" subparam="true">
      <description>field names or field index numbers (blank for all)</description>
      <value />
    </param>
    
    <param type="string" name="spw" subparam="true">
      <description>spectral windows:channels (blank for all)</description>
      <value />
    </param>
    
    <param type="string" name="timerange" subparam="true">
      <description>time range (blank for all)</description>
      <value />
    </param>
    
    <param type="string" name="uvrange" subparam="true">
      <description>uv range (blank for all)</description>
      <value />
    </param>
    
    <param type="string" name="antenna" subparam="true">
      <description>antenna/baselines (blank for all)</description>
      <value />
    </param>
    
    <param type="string" name="scan" subparam="true">
      <description>scan numbers (blank for all)</description>
      <value />
    </param>
    
    <param type="string" name="correlation" subparam="true">
      <description>correlations (blank for all)</description>
      <value />
    </param>
    
    <param type="string" name="array" subparam="true">
      <description>(sub)array numbers (blank for all)</description>
      <value />
    </param>
    
    <param type="any" name="observation" subparam="true">
      <description>Select by observation ID(s)</description>
      <any type="variant" limittypes="string int"/>
      <value type="string"></value>
    </param>

    <param type="string" name="msselect" subparam="true">
      <description>MS selection (blank for all)</description>
      <value />
    </param>


<!--
###############################################################################
MS Averaging Parameters
###############################################################################
-->

  <param type="bool" name="averagedata">
    <description>data averaging parameters</description>
    <value>True</value>
  </param>
  
    <param type="string" name="avgchannel" subparam="true">
      <description>average over channel?  (blank = False, otherwise value in channels)</description>
      <value />
    </param>
    
    <param type="string" name="avgtime" subparam="true">
      <description>average over time? (blank = False, other value in seconds)</description>
      <value />
    </param>
    
    <param type="bool" name="avgscan" subparam="true">
      <description>only valid if time averaging is turned on.  average over scans?</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="avgfield" subparam="true">
      <description>only valid if time averaging is turned on.  average over fields?</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="avgbaseline" subparam="true">
      <description>average over all baselines?  (mutually exclusive with avgantenna)</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="avgantenna" subparam="true">
      <description>average by per-antenna?  (mutually exclusive with avgbaseline)</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="avgspw" subparam="true">
      <description>average over all spectral windows?</description>
      <value>False</value>
    </param>

    <param type="bool" name="scalar" subparam="true">
      <description>Do scalar averaging?</description>
      <value>False</value>
    </param>


<!--
###############################################################################
MS Data Transformation Parameters
###############################################################################
-->

  <param type="bool" name="transform">
    <description>transform data in various ways?</description>
    <value>False</value>
  </param>

    <param type="string" name="freqframe" subparam="true">
      <description>the frame in which to render frequency and velocity axes </description>
      <value />
      <allowed kind="enum">
        <value />
        <value>TOPO</value>
        <value>GEO</value>
        <value>BARY</value>
        <value>LSRK</value>
        <value>LSRD</value>
      </allowed>
    </param>

   <param type="string" name="restfreq" subparam="true">
       <description>Rest frequency to use for velocity conversions </description>
       <value></value>
    </param>

    <param type="string" name="veldef" subparam="true">
      <description>the definition in which to render velocity </description>
      <value>RADIO</value>
      <allowed kind="enum">
        <value>RADIO</value>
        <value>OPTICAL</value>
        <value>TRUE</value>
      </allowed>
    </param>

   <param type="doubleArray" name="shift" subparam="true">
       <description>Adjust phases by this phase center shift [dx,dy] (arcsec)</description>
       <value type="doubleArray"><value>0.0</value><value>0.0</value></value>
    </param>




<!--
###############################################################################
Flag Extension Parameters
###############################################################################
-->

  <param type="bool" name="extendflag">
    <description>have flagging extend to other data points?</description>
    <value>False</value>
  </param>
    
    <param type="bool" name="extcorr" subparam="true">
      <description>extend flags based on correlation? </description>
      <value>False</value>
    </param>
<!--
  ### eventually, we'll permit pol-dep extension on corr, but not yet

      <value />
      <allowed kind="enum">
        <value />
        <value>all</value>
        <value>poln-dep</value>
      </allowed>
-->
    
    <param type="bool" name="extchannel" subparam="true">
      <description>extend flags based on channel?</description>
      <value>False</value>
    </param>

<!--

####  the following flag extend options are not available yet
    
    <param type="bool" name="extspw" subparam="true">
      <description>extend flags based on spw?</description>
      <value>False</value>
    </param>
    
    <param type="string" name="extantenna" subparam="true">
      <description>extend flags based on antenna? (blank = none, \'all\' = all baselines, otherwise antenna-based value)</description>
      <value />
    </param>
    
    <param type="bool" name="exttime" subparam="true">
      <description>extend flags based on time (within scans)?</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="extscans" subparam="true">
      <description>only valid if exttime is true.  extend flags based on scans?</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="extfield" subparam="true">
      <description>only valid if exttime is true.  extend flags based on field?</description>
      <value>False</value>
    </param>
-->

<!--
###############################################################################
Iteration Parameters
###############################################################################
-->

   <param type="string" name="iteraxis">
      <description>the axis over which to iterate</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>scan</value>
        <value>field</value>
        <value>spw</value>
        <value>baseline</value>
        <value>antenna</value>
      </allowed>
   </param>

   <param type="bool" name="xselfscale" subparam="true">
       <description>Self-scale X axis in each plot </description>
       <value>False</value>
   </param>

   <param type="bool" name="yselfscale" subparam="true">
       <description>Self-scale Y axis in each plot </description>
       <value>False</value>
   </param>


<!--
###############################################################################
Colorization Parameters
###############################################################################
-->

    <param type="string" name="coloraxis">
        <description>selects which data to use for colorizing</description>
        <value />
        <allowed kind="enum">
            <value />
            <value>scan</value>
            <value>field</value>
            <value>spw</value>
            <value>antenna1</value><value>ant1</value>
            <value>antenna2</value><value>ant2</value>
            <value>baseline</value>
            <value>channel</value><value>chan</value>
            <value>corr</value>
        </allowed>
    </param>




<!--
###############################################################################
Plot range Parameter
###############################################################################
-->

    <param type="doubleArray" name="plotrange">
        <description>plot axes ranges: [xmin,xmax,ymin,ymax]</description>
        <value>
        </value>
    </param>


<!--
###############################################################################
Label Parameters
###############################################################################
-->

  <param type="string" name="title">    
    <description>Title written along top of plot</description>
    <value />
  </param>
  
  <param type="string" name="xlabel">    
    <description>Text for horizontal axis. Blank for default.</description>
    <value />
  </param>
  
  <param type="string" name="ylabel">    
    <description>Text for vertical axis. Blank for default.</description>
    <value />
  </param>


<!--
###############################################################################
Grid Parameters
###############################################################################
-->


<param type="bool" name="showmajorgrid" subparam="false">
    <description>Show major grid lines (horiz and vert.)</description>
    <value>False</value>
</param>

<param type="int" name="majorwidth" subparam="true">
    <description>Line width in pixels of major grid lines</description>
    <value>1</value>
</param>

<param type="string" name="majorstyle" subparam="true">
    <description>Major grid line style: solid dash dot none</description>
    <allowed kind="enum">
        <value />
        <value>solid</value>
        <value>dash</value>
        <value>dot</value>
        <value>none</value>
    </allowed>
</param>

<param type="string" name="majorcolor" subparam="true">
    <description>Color as name or hex code of major grid lines</description>
    <value>B0B0B0</value>
</param>



<param type="bool" name="showminorgrid" subparam="false">
    <description>Show minor grid lines (horiz and vert.)</description>
    <value>False</value>
</param>

<param type="int" name="minorwidth" subparam="true">
    <description>Line width in pixels of minor grid lines</description>
    <value>1</value>
</param>

<param type="string" name="minorstyle" subparam="true">
    <description>Minor grid line style: solid dash dot none</description>
    <allowed kind="enum">
        <value />
        <value>solid</value>
        <value>dash</value>
        <value>dot</value>
        <value>none</value>
    </allowed>
</param>

<param type="string" name="minorcolor" subparam="true">
    <description>Color as name or hex code of minor grid lines</description>
    <value>D0D0D0</value>
</param>



<!--
###############################################################################
Export plot as image Parameters
###############################################################################
-->



    <param type="string" name="plotfile">
      <description>Name of plot file to save automatically.</description>
    </param>
    <param type="string" name="format" subparam="true">
        <description>Format type (jpg, png, ps, pdf), if not provided, plotfile extension will be used.</description>
        <allowed kind="enum">
            <value />
            <value>jpg</value>
            <value>png</value>
            <value>pdf</value>
            <value>ps</value>
        </allowed>
     </param>
     <param type="bool" name="highres" subparam="true">
         <description>Use high resolution? Always true for jpg and png.</description>
         <value>False</value>
     </param>
     <param type="bool" name="interactive" subparam="true">
         <description>Interactive mode (pop up confirmation window if true, set false for automated scripts to prevent blocking).</description>
         <value>False</value>
     </param>
     <param type="bool" name="overwrite" subparam="true">
         <description>Overwrite plot file if it already exists?</description>
         <value>False</value>
     </param>




<!--
###############################################################################
    Misc Parameters
###############################################################################
-->
<!-- remove for 3.2 release - restore when we know exactly how to make this work right
     <param type="bool" name="showgui">
         <description>Show GUI</description>
         <value>True</value>
     </param>
-->



<!--
###############################################################################
Plotxy Compliance Parameters
###############################################################################
-->


<!--

  ### we really don't want these around

  <param type="bool" name="plotxycomp">
    <description>use plotxy compliance parameters?</description>
    <value>False</value>
  </param>
  
    <param type="string" name="datacolumn" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use xdatacolumn and ydatacolumn instead</description>
      <value>data</value>
      <allowed kind="enum">
        <value>data</value>
        <value>corrected</value>
        <value>model</value>
        <value>residual</value>
      </allowed>
    </param>
    
    <param type="string" name="timebin" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use avgtime instead</description>
      <value>0</value>
    </param>
    
    <param type="bool" name="crossscans" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use avgscan instead</description>
      <value>False</value>
    </param>
    
    <param type="bool" name="crossbls" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use avgbaseline instead</description>
      <value>False</value>
    </param>
    
    <param type="string" name="width" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use avgchannel or avgspw instead</description>
      <value>1</value>
    </param>
    
    <param type="string" name="extendcorr" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use extcorrelation instead</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>all</value>
        <value>half</value>
      </allowed>
    </param>
    
    <param type="string" name="extendchan" subparam="true">
      <description>PLOYXY COMPLIANCE PARAMETER; use extchanngel instead</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>all</value>
      </allowed>
    </param>
    
    <param type="string" name="extendspw" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use extspw instead</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>all</value>
      </allowed>
    </param>
    
    <param type="string" name="extendant" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use extantenna instead</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>all</value>
      </allowed>
    </param>
    
    <param type="string" name="extendtime" subparam="true">
      <description>PLOTXY COMPLIANCE PARAMETER; use exttime, extscans, and extfield instead</description>
      <value />
      <allowed kind="enum">
        <value />
        <value>all</value>
        <value>scan</value>
        <value>field</value>
      </allowed>
    </param>

-->

<!--
###############################################################################
Constraints
###############################################################################
-->

  <constraints>
  
    <when param="xaxis">
      <equals type="string" value="" />
      <equals type="string" value="amp">
        <default param="xdatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="amplitude">
        <default param="xdatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="phase">
        <default param="xdatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="real">
        <default param="xdatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="imag">
        <default param="xdatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="imaginary">
        <default param="xdatacolumn"><value type="string" /></default>
      </equals>
      <equals value="scan"/>
      <equals value="field"/>
      <equals value="time"/>
      <equals value="time_interval"/>
       <equals value="timeinterval"/>
       <equals value="timeint"/>
      <equals value="spw"/>
      <equals value="channel"/>
       <equals value="chan"/>
      <equals value="frequency"/>
       <equals value="freq"/>
      <equals value="correlation"/>
      <equals value="corr"/>
      <equals value="antenna1"/>
       <equals value="ant1"/>
      <equals value="antenna2"/>
       <equals value="ant2"/>
      <equals value="baseline"/>
      <equals value="uvdist"/>
      <equals value="uvdist_l"/>
       <equals value="uvdistl"/>
      <equals value="u"/>
      <equals value="v"/>
      <equals value="w"/>
      <equals value="velocity"/>
       <equals value="vel"/>
      <equals value="wt"/>
       <equals value="weight"/>
      <equals value="imwt"/>
      <equals value="flag"/>
      <equals value="azimuth"/>
      <equals value="elevation"/>
      <equals value="hourang"/>
       <equals value="hourangle"/>
      <equals value="parang"/>
       <equals value="parangle"/>
       <equals value="parallacticangle"/>
      <equals value="antenna"/>
       <equals value="ant"/>
      <equals value="ant-azimuth"/>
      <equals value="ant-elevation"/>
      <equals value="ant-hourang"/>
       <equals value="ant-hourangle"/>
      <equals value="ant-parang"/>
       <equals value="ant-parangle"/>
       <equals value="ant-parallacticangle"/>
      <equals value="row"/>
      <equals value="flagrow"/>
    </when>

    
    <when param="yaxis">
      <equals type="string" value="" />
      <equals type="string" value="amp">
        <default param="ydatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="amplitude">
        <default param="ydatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="phase">
        <default param="ydatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="real">
        <default param="ydatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="imag">
        <default param="ydatacolumn"><value type="string" /></default>
      </equals>
      <equals type="string" value="imaginary">
        <default param="ydatacolumn"><value type="string" /></default>
      </equals>
      <equals value="scan"/>
      <equals value="field"/>
      <equals value="time"/>
      <equals value="time_interval"/>
       <equals value="timeinterval"/>
       <equals value="timeint"/>
      <equals value="spw"/>
      <equals value="channel"/>
       <equals value="chan"/>
      <equals value="frequency"/>
       <equals value="freq"/>
      <equals value="correlation"/>
      <equals value="corr"/>
      <equals value="antenna1"/>
       <equals value="ant1"/>
      <equals value="antenna2"/>
       <equals value="ant2"/>
      <equals value="baseline"/>
      <equals value="uvdist"/>
      <equals value="uvdist_l"/>
       <equals value="uvdistl"/>
      <equals value="u"/>
      <equals value="v"/>
      <equals value="w"/>
      <equals value="velocity"/>
       <equals value="vel"/>
      <equals value="wt"/>
      <equals value="imwt"/>
      <equals value="flag"/>
      <equals value="azimuth"/>
      <equals value="elevation"/>
      <equals value="hourang"/>
       <equals value="hourangle"/>
      <equals value="parang"/>
       <equals value="parangle"/>
       <equals value="parallacticangle"/>
      <equals value="antenna"/>
       <equals value="ant"/>
      <equals value="ant-azimuth"/>
      <equals value="ant-elevation"/>
      <equals value="ant-hourang"/>
       <equals value="ant-hourangle"/>
      <equals value="ant-parang"/>
       <equals value="ant-parangle"/>
       <equals value="ant-parallacticangle"/>
      <equals value="row"/>
      <equals value="flagrow"/>
    </when>
    
    <when param="selectdata">
      <equals type="bool" value="True">
        <default param="field"><value type="string" /></default>
        <default param="spw"><value type="string" /></default>
        <default param="timerange"><value type="string" /></default>
        <default param="uvrange"><value type="string" /></default>
        <default param="antenna"><value type="string" /></default>
        <default param="scan"><value type="string" /></default>
        <default param="correlation"><value type="string" /></default>
        <default param="array"><value type="string" /></default>
	<default param="observation"><value type="string"/></default>
        <default param="msselect"><value type="string" /></default>
      </equals>
      <equals type="bool" value="False" />
    </when>
    
    <when param="averagedata">
      <equals type="bool" value="True">
        <default param="avgchannel"><value type="string" /></default>
        <default param="avgtime"><value type="string" /></default>
        <default param="avgscan"><value type="bool">False</value></default>
        <default param="avgfield"><value type="bool">False</value></default>
        <default param="avgbaseline"><value type="bool">False</value></default>
        <default param="avgantenna"><value type="bool">False</value></default>
        <default param="avgspw"><value type="bool">False</value></default>
        <default param="scalar"><value type="bool">False</value></default>
      </equals>
      <equals type="bool" value="False" />
    </when>
    <when param="transform">
      <equals type="bool" value="False" />
      <equals type="bool" value="True">
        <default param="freqframe"><value type="string" /></default>
        <default param="restfreq"><value type="string"></value></default>
        <default param="veldef"><value type="string">RADIO</value></default>
        <default param="shift"><value type="doubleArray"><value>0.0</value><value>0.0</value></value></default>
      </equals>
    </when>
    <when param="extendflag">
      <equals type="bool" value="False" />
      <equals type="bool" value="True">
        <default param="extcorr"><value type="bool">False</value></default>
        <default param="extchannel"><value type="bool">False</value></default>
<!--
        <default param="extspw"><value type="bool">False</value></default>
        <default param="extantenna"><value type="string" /></default>
        <default param="exttime"><value type="bool">False</value></default>
        <default param="extscans"><value type="bool">False</value></default>
        <default param="extfield"><value type="bool">False</value></default>
-->
      </equals>
    </when>
    <when param="iteraxis">
        <notequals type="string" value="">
            <default param="xselfscale"><value>False</value></default>
            <default param="yselfscale"><value>False</value></default>
        </notequals>
    </when>
    <when param="plotfile">
        <notequals type="string" value="">
            <default param="format"><value type="string"/></default>
            <default param="highres"><value type="bool">False</value></default>
            <default param="interactive"><value type="bool">False</value></default>
            <default param="overwrite"><value type="bool">False</value></default>
        </notequals>
    </when>

    <when param="showmajorgrid">
      <equals type="bool" value="False" />
      <equals type="bool" value="True">
        <default param="majorwidth"><value type="int" >0</value></default>
        <default param="majorstyle"><value type="string" /></default>
        <default param="majorcolor"><value type="string"></value></default>
      </equals>
    </when>

    <when param="showminorgrid">
      <equals type="bool" value="False" />
      <equals type="bool" value="True">
        <default param="minorwidth"><value type="int">0</value></default>
        <default param="minorstyle"><value type="string" /></default>
        <default param="minorcolor"><value type="string"></value></default>
      </equals>
    </when>

<!--    
    <when param="plotxycomp">
      <equals type="bool" value="False" />
      <equals type="bool" value="True">
        <default param="datacolumn"><value type="string">data</value></default>
        <default param="timebin"><value type="string">0</value></default>
        <default param="crossscans"><value type="bool">False</value></default>
        <default param="crossbls"><value type="bool">False</value></default>
        <default param="width"><value type="string">0</value></default>
        <default param="extendcorr"><value type="string" /></default>
        <default param="extendchan"><value type="string" /></default>
        <default param="extendspw"><value type="string" /></default>
        <default param="extendant"><value type="string" /></default>
        <default param="extendtime"><value type="string" /></default>
      </equals>
    </when>
-->    


  </constraints>
</input>

<example>

            Task for plotting and interacting with visibility data.  A variety
        of axes choices (including data column) along with MS selection and
        averaging options are provided for data selection.  Flag extension
        parameters are also available for flagging operations in the plotter.
        
            All of the provided parameters can also be set using the GUI once
        the application has been launched.  Additional and more specific
        operations are available through the GUI and/or through the plotms
        tool (pm).
        

    Keyword arguments:
    vis -- input visibility dataset
           default: ''
    xaxis, yaxis -- what to plot on the two axes
                    default: '' (defaults are xaxis='time',
                                 yaxis='amp' on first execution;
                                 thereafter the most recent
                                 settings are used)
              valid options (=indicates valid synonyms): 
               MS Ids and other meta info:
                 'scan'   (number)
                 'field'  (index)
                 'time',  
                 'interval'='timeint'='timeinterval'='time_interval'
                 'spw'    (index)
                 'chan'='channel'    (index)  
                 'freq'='frequency'  (GHz)
                 'vel'='velocity'   (km/s)
                 'corr'='correlation'  (index)
                 'ant1'='antenna1'   (index)
                 'ant2'='antenna2'   (index)
                 'baseline'  (a baseline index) 
                 'row'  (absoute row Id from the MS)
               Visibility values, flags:
                 'amp'='amplitude'
                 'phase'  (deg)
                 'real'  
                 'imag'='imaginary'
                 'wt'='weight'
                 'flag'
                 'flagrow'
               Observational geometry:
                 'uvdist'  (meters)
                 'uvwave'='uvdistl'='uvdist_l'  (wavelengths, per channel)
                 'u'  (meters)
                 'v'  (meters)
                 'w'  (meters)
                 'azimuth'  (at array reference; degrees)
                 'elevation'  (at array reference; degrees)
                 'hourang'='hourangle'  (at array reference; hours)
                 'parang'='parangle'='parallacticangle'  (at array reference; degrees)
               Antenna-based (only works vs. data Ids):
                 'ant'='antenna'
                 'ant-azimuth' 
                 'ant-elevation'
                 'ant-parang'='ant-parangle'

      &gt;&gt;&gt; xaxis, yaxis expandable parameters
        xdatacolumn, 
        ydatacolumn  -- which data column to use for Visibility values:
                        default: '' ('data' on first execuation;
                                     thereafter the most recent
                                     setting is used)
                        valid options:  'data'      (observed)
                                        'corrected'='corr'
                                        'model'
                                        'residual'  (corrected - model)
    
    selectdata -- data selection parameters flag
                  default: True  (reveals data selection parameters
                                  described below)
                  Consult listobs output for data selection values,
                  and see help par.selectdata for more detailed 
                  information on syntax; also, visit
                  http://casa.nrao.edu/other_doc.shtml and click
                  on "Measurement Set selection syntax" for more
                  tips on using data selection parameters in CASA)

      &gt;&gt;&gt; selectdata expandable parameters:

      field -- Select field using field id(s) or field name(s).
              default: ''=all fields
              If field string is a non-negative integer, it is assumed a
                field index,  otherwise, it is assumed a field name
              field='0~2'; field ids 0,1,2
              field='0,4,5~7'; field ids 0,4,5,6,7
              field='3C286,3C295'; field named 3C286 and 3C295
              field = '3,4C*'; field id 3, all names starting with 4C
      spw -- Select spectral window/channels
               type 'help par.selection' for more examples.
             spw='0~2,4'; spectral windows 0,1,2,4 (all channels)
             spw='&lt;2';  spectral windows less than 2 (i.e. 0,1)
             spw='0:5~61'; spw 0, channels 5 to 61, INCLUSIVE
             spw='*:5~61'; all spw with channels 5 to 61
             spw='0,10,3:3~45'; spw 0,10 all channels, spw 3, channels 3 to 45.
             spw='0~2:2~6'; spw 0,1,2 with channels 2 through 6 in each.
             spw='0:0~10;15~60'; spectral window 0 with channels 0-10,15-60
                       NOTE ';' to separate channel selections

      timerange  -- Select data based on time range:
              default = '' (all); examples,
              timerange = 'YYYY/MM/DD/hh:mm:ss~YYYY/MM/DD/hh:mm:ss'
              Note: if YYYY/MM/DD is missing date defaults to first day in data set
              timerange='09:14:0~09:54:0' picks 40 min on first day
              timerange= '25:00:00~27:30:00' picks 1 hr to 3 hr 30min on NEXT day
              timerange='09:44:00' pick data within one integration of time
              timerange='&gt;10:24:00' data after this time
      uvrange -- Select data within uvrange (default units meters)
              default: '' (all); example:
              uvrange='0~1000klambda'; uvrange from 0-1000 kilo-lambda
              uvrange='&gt;4klambda';uvranges greater than 4 kilo lambda

      antenna -- Select data based on antenna/baseline
              default: '' (all, including auto-correlations, if present)
              If antenna string is a non-negative integer, it is assumed an
                antenna index, otherwise, it is assumed as an antenna name
              antenna='5&amp;6'; baseline between antenna index 5 and index 6.
	      antenna='!ea02'; exclude EVLA antenna 2.
	      antenna='ea13;!ea22'; EVLA antenna 13, excluding antenna 22.
              antenna='VA05&amp;VA06'; baseline between VLA antenna 5 and 6.
              antenna='5&amp;6;7&amp;8'; baselines with indices 5-6 and 7-8
              antenna='5'; all baselines with antenna index 5
              antenna='05'; all baselines with antenna number 05 (VLA old name)
              antenna='5,6,10'; all baselines with antennas 5,6,10 index numbers
              NB: For explicit selections, use a single ampersand (&amp;) to
              select only cross-correlations among the specified antennas, 
              double ampersands (&amp;&amp;) to select cross- and
              auto-correlations among the specified antennas, and
              triple ampersands (&amp;&amp;&amp;) to select only
              auto-correlations.  E.g.:
              antenna='*&amp;'; selects all cross-correlation baseline
                            (excludes all auto-correlations)
              antenna='*&amp;&amp;&amp;'; selects all auto-correlation baselines
                              (excludes all cross-correlations)
              antenna='1&amp;&amp;1,2,3'; selects baselines 1-1 (auto), 1-2,1-3 (cross)
              antenna='VA05&amp;&amp;&amp;'; selects the VA05 autocorrelation
              See the link noted above for more information.
      scan -- Scan numbers or ranges.
              default: ''  (all scans)
              scan='1,2,6,43'; scans 1, 2, 6, and 43
              scan='3~14'; scans 3 through 14, inclusive
      correlation -- Select by correlation
                     default: ''  (all correlations)
                     options: 'RR','RL','LR','LL','XX','XY','YX','YY',
                               or any comma-separated combination; use
                               basis (R/L or X/Y) appropriate to the MS)
      array -- Select the array id
               default: ''  (all array ids)
      observation Select by observation ID(s).
                  default: ''-->all;
		  example: observation='0' (select obsID 0)
      msselect -- Optional TaQL data selection

    averagedata -- data averaing parameters flag
                   default: True   (reveals expandable parameters
                                    described below)
      &gt;&gt;&gt; averagedata expandable parameters
        avgchannel -- average over channel?  either blank for none, or a value
                      in channels.
                      default: '' (no channel averaging).
        avgtime -- average over time?  either blank for none, or a value in
                   seconds.
                   default: '' (no time averaging).
        avgscan -- average over scans?  only valid if time averaging is turned
                   on.
                   default: False.
        avgfield -- average over fields?  only valid if time averaging is
                    turned on.
                    default: False.
        avgbaseline -- average over selected baselines; mutually 
                       exclusive with avgantenna.
                       default: False.  (no averaging over baseline)
        avgantenna -- form per-antenna averages; mutually exclusive with
                      avgbaseline.
                      default: False.   (no per-antenna averaging)
        avgspw -- average over selected spectral windows?
                  default: False.  (no average of spectral windows)
        scalar -- scalar averaging?
                  default: False  (i.e., do vector averaging)
    
    transform -- apply various transformations on data for plotting
                 default: False.
      &gt;&gt;&gt; transform expandable parameters
        freqframe -- the coordinate frame in which to render frequency and velocity axes
                 default: ''  (unspecified: will use frame in which data were taken)
                 options: TOPO, GEO, BARY, LSRK, LSRD
        restfreq -- the rest frequency to use in velocity conversions (MHz)
                 default: '' (use spw central frequency and show relative velocity)
                 example: '22235.08MHz'
        veldef -- the velocity definition to use
                 default: 'RADIO'
                 options: 'RADIO','OPT','TRUE'
        shift -- adjust phase according to a phase center shift [dx,dy] (arcsec)
                 default: [0,0]  (no shift)

    extendflag -- have flagging extend to other data points?
                  default: False.
      &gt;&gt;&gt; extendflag expandable parameters
        extcorr -- extend flags based on correlation? 
                   default: False.
        extchannel -- extend flags based on channel?

    iteraxis -- axis upon which iterate plots (one plot per page, for now)
                default: '' (no iteration)
                options: 'scan','field','spw','baseline','antenna',''
      &gt;&gt;&gt; iteraxis expandable parameters
        xselfscale -- If true, self-scale each iterated plot on the x axis
        yselfscale -- If true, self-scale each iterated plot on the y axis
                      default: false, which will scale all plots globally
    
    coloraxis -- axis upon which to colorize the plotted points
                options (= indicates synonyms): 
                    'scan',  'field',  'spw',  'antenna1'='ant1',  'antenna2'='ant2',
                    'baseline',  'channel'='chan',  'corr'='correlation'
                default: ''  (use a single color for all points)

    plotrange -- manual plot axis ranges: [xmin,xmax,ymin,ymax]
                 Does not affect data selection.
                 default: []; both axes will be autoscaled according
                 to the ranges found in the selected data
                 If xmin=xmax (or ymin=ymax) then that axis will
                 be autoscaled, e.g.:
                 [0,0,-2.0,14.0]; autoscale the xaxis, and use 
                                  ymin=-2.0, ymax=14.0

    title  -- title along top of plot (called "canvas" in some places)
    
    xlabel -- text to label horizontal axis, with formatting using '%%' 
    ylabel -- text to label horizontal axis, with formatting using '%%' 
    
    showmajorgrid  -- show major grid lines (horiz and vert.)
                  default: False.
      &gt;&gt;&gt;  major grid expandable parameters
        majorwidth  -- line width in pixels of major grid lines
        majorstyle  -- major grid line style: solid dash dot none
        majorcolor  -- color in hex code of major grid lines

    showminorgrid  -- show minor grid lines (horiz and vert.)
                  default: False.
      &gt;&gt;&gt;  minor grid expandable parameters
        minorwidth  --  line width in pixels of minor grid lines
        minorstyle  --  minor grid line style: solid dash dot none
        minorcolor  --  color in hex code of minor grid lines

    plotfile -- name of plot file to save automatically
                default: ''  (i.e., draw an interactive plot in the gui)
      &gt;&gt;&gt; plotfile expandable parameters 
        format -- format type ('jpg', 'png', 'ps', 'pdf'), 
                  default:  ''   (plotfile extension will be used)
        highres -- use high resolution? Always true for jpg and png.
                  default: false
        interactive  -- interactive mode? (pop up confirmation window)
                  default: false (e.g., for automated scripts to prevent blocking).
        overwrite -- Overwrite plot file if it already exists?
                  default: false
<!--
    
    showgui - Whether or not to display the plotting GUI
              default: True; example showgui=False


        extspw - extend flags based on spw?
                  default: False.
        extantenna - extend flags based on antenna?  should be either blank,
                      'all' for all baselines, or an antenna-based value.
                      default: ''.
        exttime - extend flags based on time (within scans)?
                   default: False.
        extscans - extend flags based on scans?  only valid if time extension
                    is turned on.
                    default: False.
        extfield - extend flags based on field?  only valid if time extension
                    is turned on.
                    default: False.
    

    plotxycomp - use plotxy compliance parameters?  WARNING: if used,
                  subparameters will override their corresponding plotms
                  parameter values.
                  default: False.
      &gt;&gt;&gt; plotxycomp expandable parameters
        datacolumn - maps to xdatacolumn and ydatacolumn.
                      default: 'data'.
        timebin - maps to avgtime.
                   default: '0'.
        crossscans - maps to avgscan.
                      default: False.
        crossbls - maps to avgbaseline.
                    default: False.
        width - maps to avgchannel and/or avgspw.  'all' is ignored, 'allspw'
                 sets avgspw to true, any other value is set for avgchannel.
                 default: '1'.
        extendcorr - maps to extcorr.  'half' is mapped to 'poln-dep'.
                      default: ''.
        extendchan - maps to extchannel.  '' means False, 'all' means True.
                      default: ''.
        extendspw - maps to extspw.  '' means False, 'all' means True.
                     default: ''.
        extendant - maps to extantenna.  '' means False, 'all' means True.
                     default: ''.
        extendtime - maps to exttime and/or extscans and/or extfield.  ''
                      means False for all, 'all' means True for exttime, 'scan'
                      means True for exttime and extscans, 'field' means True
                      for exttime and extfield.
                      default: ''.
-->

</example>

</task>

<!--
###############################################################################
Unimplemented parameters from plotxy in plotms
* iteration
* feed
* averagemode
* crossarrays
* stackspw
* restfreq
* frame
* doppler
* subplot
* plotsymbol
* plotcolor
* markersize
* linewidth
* plotrange
* multicolor
* selectplot
* overplot
* newplot
* clearpanel
* skipnrows
* title
* xlabels
* ylabels
* fontsize
* windowsize
* showflags
* interactive
* figfile
###############################################################################
-->

</casaxml>
