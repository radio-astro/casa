<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" ?>
<casaxml xmlns="http://casa.nrao.edu/schema/psetTypes.html"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://casa.nrao.edu/schema/casa.xsd
file:///opt/casa/code/xmlcasa/xml/casa.xsd">

<task type="function" name="hif_uvcontfit" category="pipeline">
<shortdescription>Fit the continuum in the UV plane</shortdescription>
<description>
Fit the continuum in the UV plane using polynomials.
</description>
<input>
	<param type="stringArray" name="vis" subparam="true">
		<description>The name of the input visibility file</description>
		<value></value>
	</param>

        <param type="stringArray" name="caltable" subparam="true">
                <description>Name of output mueller matrix calibration table</description>
                <value></value>
        </param>

        <param type="string" name="contfile" subparam="true">
                <description>Name of the input file of per source / spw continuum regions</description>
                <value></value>
        </param>

        <param type="string" name="field" subparam="true">
                <description>Select field(s) using id(s) or name(s)</description>
                <value type="string"></value>
        </param>

        <param type="string" name="intent" subparam="true">
                <description>Select intents</description>
                <value type="string"></value>
        </param>

	<param type="string" name="spw" subparam="true">
		<description>Spectral window / channels for fitting the continuum</description>
		<value></value>
	</param>

        <param type="string" name="combine" subparam="true">
                <description>Data axes to combine for the continuum estimation (none, spw and/or scan)</description>
                <value></value>
        </param>

  <param type="any" name="solint">
	<description>Time scale for the continuum fit</description>
         <any type="variant"/>
        <value type="string">int</value>
  </param>

  <param type="int" name="fitorder">
	<description>Polynomial order for the continuum fits</description>
	<value>1</value>
  </param>

  <param type="string" name="pipelinemode">
    <description>The pipeline operating mode</description>
    <value>automatic</value>
    <allowed kind="enum">
      <value>automatic</value>
      <value>interactive</value>
      <value>getinputs</value>
    </allowed>
  </param>

  <param type="bool" name="dryrun" subparam="true">
    <description>Run the task (False) or display the command(True)</description>
    <value>False</value>
  </param>

  <param type="bool" name="acceptresults" subparam="true">
    <description>Add the results to the pipeline context</description>
   <value>True</value>
  </param>


  <constraints>

    <when param="pipelinemode">
      <equals type="string" value="automatic">
      </equals>
      <equals type="string" value="interactive">
        <default param="vis"><value type="stringArray"></value></default>
        <default param="caltable"><value type="stringArray"></value></default>
        <default param="contfile"><value type="string"></value></default>
        <default param="field"><value type="string"></value></default>
        <default param="intent"><value type="string"></value></default>
        <default param="spw"><value type="string"></value></default>
        <default param="combine"><value type="string"></value></default>
        <default param="dryrun"><value type="bool">False</value></default>
        <default param="acceptresults"><value type="bool">True</value></default>
      </equals>
      <equals type="string" value="getinputs">
        <default param="vis"><value type="stringArray"></value></default>
        <default param="caltable"><value type="stringArray"></value></default>
        <default param="contfile"><value type="string"></value></default>
        <default param="field"><value type="string"></value></default>
        <default param="intent"><value type="string"></value></default>
        <default param="spw"><value type="string"></value></default>
        <default param="combine"><value type="string"></value></default>
      </equals>
    </when>

  </constraints>



</input>

<output>
    <param type="any" name="results">
        <description>The output results object</description>
        <any type="variant"/>
        <value></value>
    </param>
</output>
<returns type="void"/>



<example>

This task estimates the continuum emission by fitting polynomials to
the real and imaginary parts of the spectral windows and channels
selected by spw and exclude spw. This fit represents a model of
the continuum in all channels. Fit orders less than 2 are strongly
recommended. Spw window combination is not currently supported.
	

Keyword Arguments


pipelinemode -- The pipeline operating mode. In 'automatic' mode the pipeline
    determines the values of all context defined pipeline inputs automatically.
    In 'interactive' mode the user can set the pipeline context defined
    parameters manually.  In 'getinputs' mode the user can check the settings
    of all pipeline parameters without running the task.
    default: 'automatic'.

--- pipeline parameter arguments which can be set in any pipeline mode

solint --
    default: 'int'
    example: solint='30s'

fitorder -- The fit order of the polynomials.
    default: 1
    example: fitorder = 0

---- pipeline context defined parameter arguments which can be set only in
     'interactive mode'

vis -- The list of input measurement sets for which the UV continuum fits are
    to be generated. Defaults to the list of imaging measurement sets specified
    in the pipeline import data task.
    default '': Compute the continuum fit for all calibration measurement sets in the context.
    example: 'ngc5921.ms', ['ngc5921a.ms', ngc5921b.ms', 'ngc5921c.ms']

caltable -- The list of output calibration tables one per input MS. 
    default: '', The output name defaults to the standard pipeline name scheme
    example: ['M51.uvcont']

contfile -- The file containing the continuum frequency ranges used for the 
    continuum fit.
    default: '', Defaults first to the file named in the context, next to a file called
             'cont.dat' in the pipeline working directory, or ''
    example: contfile = 'mycontfile'

field -- The list of field names or field ids for which UV continuum fits are
    computed. Defaults to all fields.
    default: ''
    example: '3C279', '3C279, M82'

intent -- A string containing a comma delimited list of intents against
    which the the selected fields are matched.
    default: '', Defaults to all data with TARGET intent.
    example: 'PHASE'

spw -- The list of spectral windows and channels for which uv continuum
    fits are computed.
    default: '', Defaults to all science spectral windows.
    example: '11,13,15,17'

combine -- Data axes to be combined for solving. Axes are 'scan', 'spw', or ''.
    This option is currently not supported.
    default: '', None.
    example: combine= 'scan'


</example> 

</task>
</casaxml>
