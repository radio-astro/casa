WCSLIB version 4.3 (2007/12/27)
-------------------------------

* A new general WCS header parser wcsbth() handles binary table image arrays
  and pixel lists as well as image array headers.  Added "colax" to the wcsprm
  struct to record the column numbers for each axis in a pixel list.
  
* New function wcsbdx() is the analog of wcsidx() for the array of wcsprm
  structs returned by wcsbth().

* New function wcshdo() writes out a wcsprm struct as a FITS header.

* Changes to wcspih():
  - Bug fix, check for a == 0 (indication of a keyword that applies to
    all alternates) in internal helper function wcspih_naxes() (reported by
    Craig Markwardt).
  - Added a new ctrl option to remove valid WCS keyrecords except for those
    with a more general role, namely {DATE,MJD}-{OBS,AVG} and OBSGEO-{X,Y,Z}
    (suggested by Jim Lewis).
  - Added a rule for VELANGLa.  Also added "velangl" to the wcsprm struct.
  - Do checks on the i, k & m keyword parameters in <VALUE>.
  - Fixed the test for repeated blanks in the NAXIS and WCSAXES patterns.
  - Fixed three <CCi_ma> rules to allow m == 0.
  - Reworked the implementation notes in the prologue.

* The flex scanners, fitshdr.l, wcsbth.l, wcspih.l, wcsulex.l, and wcsutrn.l,
  invoke yylex_destroy() before returning to avoid a 16kiB memory leak.  This
  was reported by several people, however it may be problematic depending on
  the version of flex used - version 2.5.9 or later is required.  If this is
  not available C sources pre-generated pregenerated by flex 2.5.33 will be
  used.

* In wcs.c, don't define the signbit macro if already defined (for MacOSX).

* In wcs.h, documented wtbarr namespace issues in C++.

* In wcsset(), always set wcsprm.cunit[i], if possible (primarily for use by
  wcshdo()).

* In wcsfix.c, parenthesised a boolean expression that was otherwise
  incorrect.

* Fixed an obscure floating point rounding error in celset() that appeared
  with -O2 optimization in gcc v3.3.5 (Linux).

* prjset() now correctly propagates the status value returned by the specific
  projection-setting functions (reported by Bill Pence).

* Bug fix in hpxx2s(), also added bounds checking.  Minor efficiencies in
  carx2s() and merx2s().

* In the various functions that print the contents of the structs, use the
  "%p" printf conversion specifier to print addresses rather than casting the
  pointer to int and using "#x".  The latter does not work on 64-bit machines
  where sizeof(int) != sizeof(void*).

* Reorganized the various structs to get alignment on 64-bit machines.

* General: in comment text, replaced use of the obsolete term "card" with
  "keyrecord" which consists of a "keyword" followed by a "keyvalue" and
  optional "keycomment".  All header file prologues now reference the README
  file for an overview of the library.

* Miscellaneous portability fixes for 64-bit, MacOSX, OSF compiler, etc.

* Elimination of compiler warnings, e.g. parenthesised assignments used as
  truth values (a favourite gcc gripe!), etc.

* General improvements to the makefile for portability, including rules for
  processing flex descriptions, and not relying on "." being in the PATH when
  running tests.

* Process flex descriptions using a newer version of flex, primarily for
  MacOSX.  However, the processed files are now only used when flex 2.5.9 or
  later is not available.

* Added rules to the makefile for building the shared library.

* Removed WCSLIB 2.x backwards-compatibility measures from lin.h, prj.h,
  prj.c, and sph.h.

* Switched licensing to LGPL 3.0.


WCSLIB version 4.2 (2005/09/23)
-------------------------------

* Brought the installation process under control of GNU autoconf, the top-
  level makefile now builds and tests everything, and the C library has a
  config.h in which WCS_INT64 is set.  Added an INSTALL file.

* Merged the FORTRAN, C and PGSBOX READMEs into one top-level README.

* Extensions for -TAB coordinate handling: in tabx2s() and tabs2x(), allow
  extrapolation by half a cell at either end of the index and coordinate
  tables; fits_read_wcstab() (in getwcstab.{h,c}) allows TDIMn to be omitted
  for 1-D lookup tables for which it has the form '(1,K)', i.e. describing a
  degenerate 2-D array; wcsprt() now prints the wtbarr structs in wcsprm.

* Bug fixes for -TAB coordinate handling: in tabx2s() and tabs2x() the
  incorrect indexing variable, m instead of i, was used for tab->crval[];
  wcsp2s() and wcss2p() returned prematurely in the tabular coordinate loop;
  in wcstab(), removed an extraneous assignment to wtbp->kind for index
  arrays.

* In wcsp2s() and wcss2p(), elements of the stat[] vector that had been set
  were being reset incorrectly to zero.  The stat[] values are now set as flag
  bits for each coordinate element.

* Added cdfix() to the wcsfix() suite to fix erroneously omitted CDi_ja cards.

* PGSBOX is now compiled into a separate object library, and is installed
  alongside WCSLIB.

* Eliminated several instances of non-ANSI C library functions and header
  files and some residual K&R C usage.  The Sun C compiler complained about
  const int definitions of initializers used in variable declarations in some
  of the test programs; changed these to preprocessor macros.


WCSLIB version 4.1 (2005/08/31)
-------------------------------

Summary of added functionality:

  + -TAB coordinate axes are now fully implemented in the WCSLIB driver
    functions (in wcs.{h,c}); multiple -TAB axes are supported.  A new
    function, wcstab(), which is automatically invoked by wcspih(), parses
    -TAB-related header cards and sets up structs for a separate routine
    that reads the necessary arrays from a FITS binary table extension.

    An implementation of this routine in CFITSIO, fits_read_wcstab(), is
    provided.  Note however that the interface of this function is
    experimental, and the code itself must be considered beta-release in
    WCSLIB 4.1.

  + Units specifications, either from CNAMEia or inline comments (with
    brackets), of arbitrary complexity are now fully implemented via a parser,
    wcsulex(), and converter, wcsunits().  This is invoked automatically by
    wcsset().

  + Translators for non-standard WCS constructs are provided.  These cover
    date formats, units specifications, defunct celestial projection types,
    AIPS spectral axis types, and the repair of malformed cylindrical
    coordinate systems.

  + wcspih() now has options to remove the WCS cards it has processed from the
    header and a new generic FITS header parser, fitshdr(), may be used to
    parse the remaining non-WCS cards.  In addition to the more basic types,
    it handles 64-bit and 'very long' (70 digit) integer keyvalues, and also
    continued string keyvalues.  It also does keyword matching and extracts
    units specifications in inline comments.

  + -LOG coordinates are now implemented independently of spectral coordinate
    types.  Multiple -LOG axes are supported.

  + New function wcssptr() translates the spectral axis in a wcsprm struct to
    the required type.

  + The README file now gives an introduction to, and complete overview of,
    WCSLIB.  It provides a point of entry to programming with WCSLIB.
    Complete descriptions and usage notes for all functions are contained in
    the header files.

  + The FORTRAN wrappers and test programs are now completely up-to-date with
    respect to the C implementation.

  + All code, including the FORTRAN wrappers, PGSBOX, and all test programs,
    now pass 'purify' without memory leaks, uninitialized memory reads, memory
    access violations, or other memory faults.

Change notes:

* Added options to wcspih() to remove WCS cards from the input header leaving
  only non-WCS cards behind.  Modified test programs tpih1.c and tpih2.c to
  use CFITSIO optionally via preprocessor macro DO_CFITSIO.

* New function wcstab() in wcshdr.{h,c} parses -TAB-related header cards and
  sets up structs for a separate routine that reads the necessary arrays from
  a FITS binary table extension.  New test/demo program twcstab.c using header
  defined in wcstab.cards.

* CFITSIO implementation, fits_read_wcstab() in getwcstab.{h,c}, of a
  function, independent of WCSLIB, for extracting arrays from a binary table
  as required in constructing -TAB coordinates.

* New units specification parser, wcsulex() in wcsunits.h and wcsulex.l, and
  converter, wcsunits() in wcsunits.{h,c}.  New test/demo program tunits.c.

* New parser for non-standard units specifications, wcsutrn() in wcsunits.h
  and wcsutrn.l, also tested by tunits.c.

* New functions datfix(), unitfix() (which applies wcsutrn()), celfix(), and
  spcfix() join cylfix() in wcsfix.{h,c} to translate various forms of non-
  standard or quasi-standard FITS WCS keyvalues in a wcsprm struct.  wcsfix()
  applies all of these in sequence.  New test/demo program twcsfix.c, with
  wcsfix() also now invoked by tpih1.c.

* New generic FITS header parser, fitshdr() in fitshdr.{h,l}.  New test/demo
  program tfitshdr.c uses wcs.cards with extra non-WCS cards added.

* -LOG coordinates are now treated as a coordinate type separate from spectral
  coordinates, implemented via log.{h,c} and test program tlog.c.  The
  logarithmic functions were removed from spx.{h,c}, and spc.c.

* Extensive changes to wcs.{h,c} to support multiple -TAB and -LOG coordinate
  axes and units conversion.  Substantially changed the test program, twcs.c,
  to test the more general functionality.

* New function wcssptr() in wcs.{h,c} translates the spectral axis in a wcsprm
  struct.

* Added DATE-AVG to wcsprm.  Also ntab, tab, nwtb, and wtb required for -TAB
  implementation.  Define struct wtbarr.

* Added a types[] member to the wcsprm struct to identify axis coordinate
  types using a four-digit code.

* Use memset() in wcsini() to null-fill character arrays in the wcsprm struct
  so that they don't appear to be padded with garbage when displayed by gdb.

* Do alias translation for AIPS-convention spectral types in wcsset() using
  spctyp().  If wcsset() finds a CTYPEia in "4-3" form with an unrecognized
  algorithm code it now returns an error rather than assume that it's a linear
  axis.  wcsset() now also resets lonpole and latpole to the values actually
  used.

* Modified spctyp() to translate AIPS-convention spectral ctypes, and modified
  the argument list to return the parsed spectral type and algorithm code.
  The return arguments will not be modified if CTYPEia is not a valid spectral
  type; zero-pointers may be specified for any that are not of interest.
  Removed the external const variables, spc_codes and spc_ncode, as their
  function is now fulfilled by spctyp().

* Fixed a bug in spctrn() in resolving ctypeS2 wildcarding.

* Added latpreq member to the celprm struct, set by celset() to indicate how
  LATPOLE is used.  Augmented tcel2.c to report it.

* New function tabmem() in tab.{h,c} takes control of user-allocated memory.

* tabini() allows K == 0 and also K[m] == 0 to initialize partially the tabprm
  struct (for wcstab()).  It now does fine-grained bookkeeping of memory
  allocation for the index arrays and allocates each individually.
  tabprm.index[] == 0x0 is recognized as default indexing in tabset(),
  tabx2s() and tabs2x().

* The *prt() functions report parameters to an extra decimal place.

* tabprt() prints the array index for elements of the coordinate and index
  vectors.

* Set the 0th element in all *_errmsg arrays to "Success".

* Extracted string utility functions used by WCSLIB into wcsutil.{h,c}.

* Removed support for K&R C.


WCSLIB version 4.0 (2005/02/07)
-------------------------------

* Changed the copyright notice in all library routines from LGPL to GPL as
  recommended by the FSF (http://www.gnu.org/licenses/why-not-lgpl.html).

* Implemented tabular coordinates (-TAB).  New files: tab.h and tab.c, and
  test programs ttab[123].c.  These have not been incorporated into the
  higher-level (wcs.h) functions at this stage.

* New spectral functions: spchek() checks a spectral algorithm code for
  legitimacy; from the spectral keywords given, spcspx() derives the
  corresponding CRVALi and CDELTi keywords for the underlying P-, and X-type
  spectral coordinates; spcxps() does the opposite; spctrn() combines spcspx()
  and spcxps() to translate one set of spectral keywords into another, e.g.
  'FREQ' -> 'ZOPT-F2W'.

* Implemented the HEALPix (HPX) projection in the prj functions.

* Added a new function, wcsidx(), to return an array that indexes the
  alternate coordinate descriptions found by wcspih() (suggested by
  Bill Pence, NASA/Goddard).  Modified tpih1.c to exercise it.

* In wcsp2s() and wcss2p(), check that nelem equals or exceeds wcs.naxis;
  emphasised this in the usage notes for these functions in tab.h (suggested
  by Bill Pence, NASA/Goddard).

* Moved the macros used for UNDEFINED values and the corresponding macro test
  function, undefined(), to wcsmath.h for general use.  Previously, UNDEFINED
  values were only used internally, but they are now visible in some of the
  structs, particularly values of undefined auxiliary header cards in the
  wcsprm struct.

* Remove const from the double args in the specx() prototype in spx.h to match
  the definition in spx.c (reported by Bryan Irby, NASA/Goddard).

* Fixed the interaction between the FLAVOUR and PGPLOTLIB definitions in the
  C and FORTRAN Makefiles by introducing a separate variable, DO_PLOTS, to
  control whether to exercise test programs that require PGPLOT (reported by
  Bill Pence, NASA/Goddard).  Also added an "install" target to all Makefiles.


WCSLIB version 3.6 (2004/08/25)
-------------------------------

* New service routine, wcssub() extracts the coordinate description for a
  subimage from a wcsprm struct.  wcscopy() is now implemented as a
  preprocessor macro that invokes wcssub().  New test program, twcssub.c,
  tests wcssub().

* In wcspih():

  1) Fixed handling of string-valued keywords where the inline comment
     contains a single-quote character (').

  2) Fixed the address arithmetic for EPOCH and VELREF.

  3) Translate VSOURCEa into ZSOURCEa if required.

  4) Recognize SSYSSRCa.

  5) Support free-format string keyvalues, as well as integer and floating-
     point keyvalues; documented this in the prologue of wcshdr.h.

  6) Allow header cards without inline comments.

  7) Fixed function prototyping in wcspih.l (i.e. ANSI and non-ANSI forms were
     potentially mixed).

  8) Catch an unhandled newline character on the END card that was echoed
     to stdout.

  9) In error messages, print "ERROR" (uppercase) - POSIX standard.

* Modified wcs.cards to explain and test free-format keyvalues, and also
  augmented the inline comment on illegal WCS cards that are to be rejected,
  and WCS-like cards to be discarded.  Added a header card with no inline
  comment.

* Removed vsource from the wcsprm struct and added ssyssrc.

* In wcsini(), fixed a problem with memory management for wcs.pv when NPVMAX
  is zero; likewise for wcs.ps and NPSMAX.

* In wcsprt(), don't print auxiliary coordinate system information in arrays
  with zero address.

* In wcss2p(), status == 9 (one or more invalid world coordinates) was not
  returned appropriately.

* Renamed twcs1.c to twcs.c, and twcs2.c to twcsmix.c.

* "Error status/code/number" is now referred to consistently as the "status
  return value".

* Some vestiges of K&R C were removed: preprocessor definition of const, and
  K&R function prototypes.

* Worked over the C, FORTRAN, and PGSBOX makefiles, in particular to make them
  all consistent.

WCSLIB version 3.5 (2004/06/28)
-------------------------------

* WCSLIB now provides a function, wcspih() implemented as a Flex description,
  that parses a FITS image header, either that of a primary HDU or an image
  extension.  Given a character array containing the header it identifies and
  reads all WCS cards for the primary coordinate description and up to 26
  alternate descriptions and returns this information as an array of wcsprm
  structs.  A service routine, wcsvfree(), is provided to free the memory
  allocated by wcspih().  The relevant header file for these functions is
  wcshdr.h.

  Test programs, tpih1 and tpih2, are provided to verify wcspih.  The first
  simply prints the contents of the structs using wcsprt().  The second uses
  cpgsbox() to draw coordinate graticules.  A FITS WCS test header has been
  developed to provide input to these test programs.  It is implemented as a
  list of card images, wcs.cards, one card per line, together with a program,
  tofits, that compiles these into a valid FITS file.  tpih1 uses its own code
  to read this, whereas tpih2 uses the fits_hdr2str() function from CFITSIO.

* Removed twcsprt, tpih exercises wcsprt() much more thoroughly than twcsprt
  ever did.  Modified twcs1 to print the size of the various structs as
  twcsprt used to.

* Although they are not used in any coordinate calculations, the wcsprm struct
  now provides data members for storing all of the auxiliary FITS WCS header
  cards defined in Papers I, II, and III, such as WCSNAMEa, EQUINOXa, and
  CNAMEia.  Members are also provided for storing the alternate descriptor
  code (the "a" in CTYPEia), and the binary table column number.  These are
  supported by the high level WCSLIB routines, wcsini(), wcscopy(), wcsfree(),
  and wcsprt().  Refer to wcs.h for details.

* The number of PVi_ma cards for which wcsini() allocates memory is now set by
  a global variable, NPVMAX (previously a C-preprocessor macro).  This
  defaults to 64 but may be changed by a new function, wcsnpv().  The wcsprm
  struct contains a new member, npvmax, that records the value of this number
  at the time the struct was initialized.  This is in addition to npv which
  records the actual number of cards that were encountered.

  Similarly, NPSMAX (default 8) is used for the number of PSi_ma cards, and it
  may be changed via wcsnps().

  The axis number, i, in the pvcard struct used for storing PVi_ma cards may
  now be set to 0 to indicate the latitude axis.

* calloc() is now used in place of malloc() in allocating memory for arrays,
  and inclusion of malloc.h has been replaced with stdlib.h for all platforms.

  wcsfree() checks that wcs.flag != -1 before testing wcs.m_flag when freeing
  memory allocated by wcsini() in case the struct is uninitialized.  Similarly
  for linfree().

* In prj.h, renamed C-preprocessor macros INI, PRT, SET, X2S and S2X to
  PRJINI, PRJPRT, PRJSET, PRJX2S and PRJS2X to reduce the likelihood of
  namespace clashes.  Similarly in spc.h.

  Also, in prj.c, changed the name of helper routine offset() to prjoff() to
  reduce the likelihood of global namespace conflicts.

* In line with bonx2s() and bons2x(), bonset() now recognizes the equatorial
  case of Bonne's projection as Sanson-Flamsteed, mainly so that the auxiliary
  information in the prjprm struct more accurately reflects the truth.
  Modified tcel2 to exercise this by using an equatorial Bonne projection in
  place of the Hammer-Aitov.

* zpns2x() used prj.w[0] for bounds checking, though this had not been set
  by zpnset() for polynomials of degree N < 3.  Consequently, bounds checking
  for N < 3 was unreliable (reported by David Berry, STARLINK).

* Changed some variable names in tscs2x(), cscx2s(), cscs2x(), qscx2s(), and
  qscs2x() to match Paper II, and likewise changed some inequality tests in
  qscs2x() without changing the results.

* Minor tidying up of output formatting in prjprt().

* Added the alternate version code to FITS WCS keywords mentioned in comments,
  e.g. CTYPEi changed to CTYPEia.

WCSLIB version 3.4 (2004/02/11)
-------------------------------

* In aitx2s(), apply the boundary condition 0.5 <= Z^2 <= 1 given after
  Eq. (109) in WCS Paper II to detect outlying pixels.

* Fixed several special-case bugs in celset():

  1) For theta_0 = 90, in substituting the default value for phi_p (LONPOLE),

     a) for the special case when delta_0 = 90, celset() provided the wrong
        value (180 instead of 0),

     b) celset() neglected to add phi_0 (normally 0).

  2) For theta_0 != 90,

     a) for the special case when delta_0 = -90, celset() incorrectly computed
        delta_p (as theta_0 instead of -theta_0),

     b) for the special case when delta_p = +90 (or -90), celset() neglected
        to subtract (or add) phi_0 (normally 0).

  3) For |delta_0| = 90, celset() incorrectly allowed the particular, invalid,
     value of phi_p (LONPOLE) that put the other pole at the fiducial point.

  4) For theta_0 = 0, delta_0 = 0 LATPOLE determines delta_p completely.  For
     LATPOLE > 90 celset() now sets delta_p to 90, and for LATPOLE < -90 it
     sets it to -90.

* Additional refinements in celset():

  1) cel->ref[2] is normalized in the range [-180,180].

  2) Account for rounding error in the computation of delta_p.

* sphx2s() and sphs2x() incorrectly handled the "change in the origin of
  longitude" special case that arises when delta_p = -90, in the even more
  restrictive case where |theta| = 90 also; it applied Eq. (3) instead of
  Eq. (4) of Paper II.

* Added a new test program, tcel2.c, to exercise celset() more thoroughly.
  Renamed the original tcel.c to tcel1.c and modified the Makefile to suit.

WCSLIB version 3.3 (2003/10/21)
-------------------------------

* In celset(), the default value for phi_p (LONPOLE) is

     phi_p = phi_0 + ((delta_0 < theta_0) ?  180.0 : 0.0)

  Previously phi_0 (which is normally zero) was not added (reported by
  David Berry, STARLINK).

* wcsprt() and linprt() now check that the structs have been initialized.

* In wcsini(), when the wcsprm flag is -1 also set the linprm flag to -1 to
  force initialization of the memory managed by linset().

* wcsset() now explicitly initializes the celprm and spcprm structs via
  celini() and spcini().

* Fixed syntax errors in the macro definitions of linrev_errmsg and
  linfwd_errmsg.

* In Makefile, added the -ansi option to gcc to force it to behave like a
  strict ANSI C compiler, specifically in setting the __STDC__ preprocessor
  macro.

WCSLIB version 3.2 (2003/09/09)
-------------------------------

* Added the facility of setting the flag member of a wcsprm struct to -1
  before calling wcsini() for the first time in order to initialize memory
  management.  Likewise for linprm and linini().

* Renamed wcscpy() to wcscopy() to avoid a conflict with the Posix "wide
  character string" function of the same name (wchar.h).  In particular, this
  is used by the GNU C++ string class.

* The higher level functions (wcs, cel, spc) no longer return prematurely if
  some of the input coordinate values are invalid.

* All functions now test whether a null pointer for the particular struct
  (wcsprm, celprm, etc.) has been passed to them.

* Function return codes have been rationalized into a consistent set within
  each of the wcs, cel, lin, prj, spc, and spx suites of functions.  Error
  messages to match these error codes are now encoded in a single character
  array, e.g. wcs_errmsg and prj_errmsg, instead of a separate array for each
  function.  Macro definitions for the older character arrays (e.g.
  wcsini_errmsg) have been provided for backward compatibility.

* Declared prj_stat as extern in prj.h.

WCSLIB version 3.1 (2003/04/29)
-------------------------------

* Added "global" and "divergent" prjprm struct informational members to record
  whether the projection is capable of mapping the whole sphere, and whether
  it is divergent in latitude.

* Function cylfix() provided to fix WCS FITS header cards for malformed
  cylindrical projections (c.f. Paper II, Sect. 7.3.4).

* Added support for CUNITi cards to wcsprm (but not currently implemented).

* Added macro implementations of the trigd functions to wcstrig.h, enabled if
  WCSTRIG_MACRO is defined.

* Improved printing of the WCSLIB structs.

* Added macro definitions for the lengths of the WCSLIB structs measured in
  sizeof(int) units (mainly for the FORTRAN wrappers).

WCSLIB version 3.0 (2003/04/01)
-------------------------------
Beta release.

* Fully vectorized function interfaces (C preprocessor macros are available
  to implement the scalar interfaces of the proj.c, sph.c, and lin.c routines
  from WCSLIB 2.x).

* Implementation of Paper II, Sect. 2.5: User-specified (phi0, theta0).

* Implementation of Paper III (excluding "-TAB").

* Memory management is now implemented in the upper-level (wcs.c) routines.

* New extensible design should accomodate Paper IV (and any other) without
  further change to the function interfaces.

WCSLIB version 2.9 (2002/04/03)
-------------------------------

* Fixed a bug with alias translation in wcsset().

* Added a conditional compilation directive to lin.c for Apple's MacOS X.

WCSLIB version 2.8 (2001/11/16)
-------------------------------

* Added support for the SZP projection with szpset(), szpfwd() and szprev(),
  and generalized AZP with support for the tilt parameter, gamma.

* Added phi0 to the prjprm struct, this is set by the projection
  initialization routines along with theta0.

* Fixed a problem in wcsmix() caused by numerical imprecision that could
  cause it not to recognize when convergence was reached; break out of the
  loop early if a discontinuity is detected.

* Clarified the usage of vspan in the prologue to wcsmix().

* Fixed comments relating to LATPOLE in the prologue to cel.c and tcel.c, and
  replaced references to LONGPOLE with LONPOLE.

* Augmented the error reports in twcs2.

* Modified projex() in tproj1 and prjplt() in tproj2 to make use of the
  information stored in the prjprm struct.

WCSLIB version 2.7 (2001/02/19)
-------------------------------

* Added generic driver routines prjset(), prjfwd() and prjrev().  These invoke
  specific projection routines via the pointer-to-function elements, prjfwd
  and prjrev, transferred to the prjprm struct from celprm.

* Added code (3-letter projection code) and theta0 (reference latitude)
  elements to prjprm.

* The projection code for the Sanson-Flamsteed projection is now SFL.  The
  upper-level routines, wcsset(), wcsfwd(), and wcsrev(), recognize GLS as an
  alias for this.

* wcsset() now recognizes 'xyLN/xyLT' axis pairs.

* Two bugs in the translation from NCP to SIN in wcsfwd() and wcsrev() were
  fixed: (1) the projection parameter was computed incorrectly and (2) they
  did not honour prj->flag set to -1 to disable strict bounds checking.

* A bug in wcsmix() was fixed - it was relying on the wcsprm struct to have
  been initialized beforehand.

* The test programs now use the cpgplot interface to PGPLOT, the old tpgc.c
  and tpgf.f wrappers have been removed.

WCSLIB version 2.6 (2000/05/10)
-------------------------------

* Check for invalid (x,y) in zearev().

* In wcsmath.h, guard against prior definition of PI and other preprocessor
  variables.

WCSLIB version 2.5 (1999/12/14)
-------------------------------

* Added copyright notice to header files and prefixed include guard names with
  "WCSLIB_".

* Fixed cube face handling in wcsfwd() and wcsrev() (reported by Doug Mink,
  CfA).  Allow more general face layout in the inverse quadcube projections.

* Fixed the problem in wcsmix() where it failed to find a valid solution when
  the solution point lay at a native pole of a projection in which the pole is
  represented as a finite interval.  However, wcsmix() will only ever return
  one solution even when two or more valid solutions may exist.

* wcsmix() now accepts viter in the range 5 - 10, the specified value will be
  pushed up or down into this range if necessary.

* The projection routines for AZP, TAN, SIN, ZPN, and COP now return error 2
  if (phi,theta) correspond to the overlapped (far) side of the projection.
  This strict bounds checking can be switched off by setting prj->flag to -1
  (rather than 0) when the projections are initialized.

* The upper level routines, wcsset(), wcsfwd(), wcsrev(), and wcsmix(), now
  recognize the NCP projection and convert it to the equivalent SIN
  projection.  The lower level routines do not recognize NCP.

* Extracted definitions of mathematical constants (PI etc.) from proj.h into
  wcsmath.h in order to avoid conflicts with their definition in math.h in
  some systems (such as Linux).

* Describe the two alternate representations of the quadcube projections
  (i.e. faces laid out or stacked) in the prologue of wcs.c.

WCSLIB version 2.4 (1996/09/23)
-------------------------------

* In sinrev(), cscrev(), qscrev(), and tscrev(), return error 2 if (x,y) do
  not lie within the perimeter of the projection.  In sinrev(), stop the
  computation of phi for the "synthesis" projection being applied to the pure
  "orthographic" case (reported by David Berry, STARLINK).

* (Internal change) Renamed variables l <-> m in the quadcube projections to
  accord with standard usage (and revised WCS draft paper).

WCSLIB version 2.3 (1996/06/24)
-------------------------------

* Fixed two bugs in zpnset().  The first led to an incorrect determination of
  the degree of the polynomial and would mainly have affected the efficiency
  of zpnrev().  The second affected the determination of the boundary of the
  projection but would only have been significant for projections with a point
  of inflection between 9 and 10 degrees of the pole.  Reported by
  David Berry, STARLINK.

* Replaced usage of alloca() in lin.c with malloc() and free() for portability
  as suggested by Klaus Banse, ESO (kbanse@eso.org).

* Allow for C implementations that provide their own versions of cosd(),
  sind(), tand(), acosd(), asind(), atand(), and atan2d().  From Klaus Banse,
  ESO (kbanse@eso.org).

* Implemented the CUBEFACE axis for quadcube projections.

* Made all function prototypes const-correct.

* Adapted the header files to C++ usage.

* Added a new test program, twcs1, to verify closure of wcsfwd() and
  wcsrev().  The old twcs test program is now called twcs2.

* Added external arrays of error messages indexed by function return value.
  For example, extern const char *wcsmix_errmsg[] for wcsmix().  Messages for
  the many proj.c functions are in prjfwd_errmsg[], etc.


WCSLIB version 2.2 (1996/01/18)
-------------------------------

* Amended the projection equations for the conics (COP, COD, COE, COO) and
  Bonne's projection (BON) to correctly handle southern hemisphere projections
  with PROJP1 < 0 (reported by Lindsay Davis, NOAO).  Revised tproj1 and
  tproj2 to test such cases.


WCSLIB version 2.1 (1995/11/17)
-------------------------------

The main change of interest to programmers is that of changed argument lists
for wcsfwd() and wcsrev() as described below.

* The WCS linear transformations are now implemented in WCSLIB, complete with
  matrix inverter.  The new files are lin.c, lin.h, and test program tlin.c.

* Given either the celestial longitude or latitude plus an element of the
  pixel coordinate a new routine, wcsmix(), solves for the remaining elements
  by iterating on the unknown celestial coordinate element using wcsfwd().

* The high level driver routines wcsfwd(), wcsrev(), and wcsmix() now apply
  the full WCS algorithm chain (except for pixel regularization table),
  including parsing the CTYPEn header cards and computing non-celestial
  elements of the world coordinate.  This required a change to their argument
  lists which now more closely reflect the sequence of algorithms applied.  A
  new routine, wcsset(), parses the CTYPEn.

* The high level driver routines of WCSLIB 1.0 are available as intermediate
  level drivers celset(), celfwd(), and celrev(), but note that their argument
  lists have been extended to return native coordinates.  The related struct
  is now called celprm instead of wcsprm.

* The reference point for conic projections is now at the midpoint of the
  standard parallels.  The FITS header cards PROJP1 and PROJP2 now give the
  half-sum (midpoint) and half-difference of the latitudes of the standard
  parallels; previously they gave the latitudes of the standard parallels
  themselves.  The change is reflected in this release of WCSLIB.

* A bug in celset() (formerly wcsset()) that misapplied WCS draft equations
  7 has been fixed (thanks to Rick Ebert IPAC/JPL and Lindsey Davis, NOAO for
  reporting this).  This affected the computation of Euler angles for the
  celestial coordinate transformation for those projections that have their
  reference point away from the native pole.  In investigating this a
  deficiency with the formalism was discovered that led to the introduction
  of a LATPOLE FITS header card which may be used to disambiguate where
  CRVAL1, CRVAL2, and LONGPOLE do not uniquely determine the latitude of the
  native pole.  The celprm struct (formerly wcsprm) has been extended to
  accomodate LATPOLE.

* Default values of LONGPOLE and LATPOLE are now supported and their use is
  recommended where appropriate.

* Numerical precision was being lost near the native poles in the SIN, AIR,
  and QSC projections and this has been recovered (reported by Lindsey Davis,
  NOAO).  Floating underflows in CSC are now avoided.

* Numerical precision was also lost in certain circumstances in the spherical
  coordinate transformation routines and this has been fixed.

* The test programs have been enhanced in various ways and the library has
  been validated on an SGI machine using both 32-bit and 64-bit compilers.

WCSLIB version 1.0 (1995/01/31)
-------------------------------

Initial release.

------------------------------------------------------------------------------
$Id: CHANGES,v 4.3 2007/12/27 05:41:36 cal103 Exp $
